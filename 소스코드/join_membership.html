<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->
    <link rel="icon" href="./static/favicon.png">
    <title>Aim Data Academy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
        body {
            display: grid;
            background-image: url(background.png);
            background-size: cover;
            place-items: center;
            height: 100%;
            margin: 0;
            margin-top: 60px;
        }

        .card {
            place-items: center;
            float: none;
            margin-top: 30px;
            width: 460px;

            max-width: calc(100% - 32px);

            background: #fff;

            border-radius: 5px;

            box-shadow: 0 20px 40px rgba(0, 0, 0, .15);

            padding: 28px 32px;

            font-size: small;
        }

        .firstname {
            font-size: medium;
            font-weight: 700;
            color: #405189;
        }

        .box {
            width: 350px;
            height: 35px;
        }

        button {
            border-radius: 15px;
            border: 0;
            width: 350px;
            height: 35px;
            background-color: #0ab39c;
            color: white;
        }

        #graycolor {
            font-size: x-small;
            color: gray;
        }

        #data {
            margin-top: 50px;
        }

        #dontYouHave {
            font-size: small;
        }

        #checkbox {
            accent-color: #405189;
        }


        .redstar {
            color: red;
            float: right;
        }

        .box form-control {
            border-color: black;
            padding-left: 12px;
        }
        
    </style>

    <!-- Sweet Alert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© CSS -->

</head>

<body>
    <p><a href="./login.html"><img src="Datascience.png" id="data" width="190" height="21"></a></p>
    <div class="card">
        <p class="firstname">íšŒì›ê°€ì…</p><br>

        <form novalidate onsubmit="return validateForm()">
            <label for="birthday" class="form-label"> ìƒë…„ì›”ì¼ </label> <span class="redstar">* í•„ìˆ˜</span>
            <p><input type="date" id="birthday" class="box form-control" placeholder="Enter Username">
            <div class="invalid-feedback">ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.</div>
            </p>

            <label for="phoneNumber" class="form-label"> íœ´ëŒ€í°ë²ˆí˜¸ </label> <span class="redstar">* í•„ìˆ˜</span>
            <p>
                <input type="text" id="phoneNumber" class="box form-control" placeholder="ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš”">
            <div class="invalid-feedback">íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
            </p>

            <label for="telNumber" class="form-label"> ì „í™”ë²ˆí˜¸ </label>
            <p><input type="text" id="telNumber" class="box form-control" placeholder="000-000-0000"></p>

            <label for="emailAddress" class="form-label"> ì´ë©”ì¼ </label> <span class="redstar">* í•„ìˆ˜</span>
            <p><input type="email" id="emailAddress" class="box form-control" placeholder="xxx@xxx.xxx">
            <div class="invalid-feedback">ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
            </p>

            <label for="zipCode" class="form-label"> ìš°í¸ë²ˆí˜¸ </label>
            <p><input type="text" id="zipCode" class="box form-control" placeholder="00000"></p>

            <label class="form-label" for="address">ì£¼ì†Œ</label>
            <p><input type="text" id="address" class="box form-control" placeholder="ì£¼ì†Œ"></p>

            <label class="form-label" for="detail_address">ìƒì„¸ ì£¼ì†Œ</label>
            <p><input type="text" id="detail_address" class="box form-control" placeholder="ìƒì„¸ì£¼ì†Œ"></p>

            <button type="submit"> ê°€ì…í•˜ê¸° </button>

        </form>
    </div>
    <br>

    <!-- ê³µí†µ js -->
    <script src="./commonScript.js"></script>
    <script>
    // ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥ (í•¸ë“œí° ë²ˆí˜¸)
    document.getElementById("phoneNumber").addEventListener("input", function () {
        this.value = this.value.replace(/[^0-9]/g, "");
    });

    // Bootstrap ì˜¤ë¥˜ í‘œì‹œìš©
    function showError(input, message) {
        input.classList.add("is-invalid");
        const feedback = input.nextElementSibling;
        if (feedback && feedback.classList.contains("invalid-feedback")) {
            feedback.textContent = message;
        }
    }

    function clearError(input) {
        input.classList.remove("is-invalid");
    }

    function validateForm() {

        const birth = document.getElementById("birthday");
        const phone = document.getElementById("phoneNumber");
        const tel = document.getElementById("telNumber");
        const email = document.getElementById("emailAddress");
        const zipcode = document.getElementById("zipCode");
        // ì£¼ì†Œ, ìƒì„¸ì£¼ì†ŒëŠ” ì§€ê¸ˆì€ ëª¨ì–‘ë§Œ ë§ì¶”ê³  ê²€ì‚¬ëŠ” ì•ˆ í•¨

        let valid = true;

        // âœ… ìƒë…„ì›”ì¼ (í•„ìˆ˜)
        if (!birth.value) {
    // ì•„ë¬´ ê²ƒë„ ì•ˆ ì„ íƒí–ˆì„ ë•Œ
    showError(birth, "ìƒë…„ì›”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.");
    valid = false;
} else {
    const birthDate = new Date(birth.value); // input type="date" â†’ YYYY-MM-DD
    const today = new Date();
    // ì˜¤ëŠ˜ ë‚ ì§œë§Œ ë¹„êµí•˜ë„ë¡ ì‹œÂ·ë¶„Â·ì´ˆ 0ìœ¼ë¡œ ë§ì¶°ì¤Œ
    today.setHours(0, 0, 0, 0);

    if (isNaN(birthDate.getTime())) {
        // í˜•ì‹ì´ ì´ìƒí•´ì„œ ë‚ ì§œë¡œ ë³€í™˜ì´ ì•ˆ ë˜ëŠ” ê²½ìš°
        showError(birth, "ì˜¬ë°”ë¥¸ ìƒë…„ì›”ì¼ì„ ì„ íƒí•˜ì„¸ìš”.");
        valid = false;
    } else if (birthDate > today) {
        // ë¯¸ë˜ ë‚ ì§œì¸ ê²½ìš°
        showError(birth, "ìƒë…„ì›”ì¼ì€ ì˜¤ëŠ˜ ì´í›„ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        valid = false;
    } else {
        // ì •ìƒì¸ ê²½ìš°
        clearError(birth);
    }
}

        // âœ… íœ´ëŒ€í° ë²ˆí˜¸ (í•„ìˆ˜)
        const phoneRegex = /^[0-9]{10,11}$/;
        if (!phone.value) {
            showError(phone, "íœ´ëŒ€í° ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
            valid = false;
        } else if (!phoneRegex.test(phone.value)) {
            showError(phone, "íœ´ëŒ€í° ë²ˆí˜¸ëŠ” ìˆ«ì 10~11ìë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤.");
            valid = false;
        } else {
            clearError(phone);
        }

        // ğŸ”¹ ì „í™”ë²ˆí˜¸ (ì„ íƒ: ê°’ì´ ìˆì„ ë•Œë§Œ í˜•ì‹ ê²€ì‚¬)
        const telRegex = /^\d{2,3}-\d{3,4}-\d{4}$/;
        if (tel.value && !telRegex.test(tel.value)) {
            showError(tel, "ì „í™”ë²ˆí˜¸ëŠ” 000-0000-0000 í˜•ì‹ì…ë‹ˆë‹¤.");
            valid = false;
        } else {
            clearError(tel);
        }

        // âœ… ì´ë©”ì¼ (í•„ìˆ˜)
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailAddress.value) {
            showError(emailAddress, "ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.");
            valid = false;
        } else if (!emailRegex.test(emailAddress.value)) {
            showError(emailAddress, "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
            valid = false;
        } else {
            clearError(emailAddress);
        }

        // ğŸ”¹ ìš°í¸ë²ˆí˜¸ (ì„ íƒ: ìˆì„ ë•Œë§Œ ìˆ«ì 5ìë¦¬ ì²´í¬)
        const zipRegex = /^[0-9]{5}$/;
        if (zipcode.value && !zipRegex.test(zipcode.value)) {
            showError(zipcode, "ìš°í¸ë²ˆí˜¸ëŠ” ìˆ«ì 5ìë¦¬ì…ë‹ˆë‹¤.");
            valid = false;
        } else {
            clearError(zipcode);
        }

        return valid;
    }
</script>
    <!-- CrpytoJS ì•”í˜¸í™” íˆ´ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.js"></script>
    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© Javascript  -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <!-- Sweet Alert2  -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
</body>

</html>